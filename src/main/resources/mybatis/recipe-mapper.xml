<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="recipe">
	<select id="selectcnt" resultType="int">
		SELECT COUNT(*) FROM recipe_info
	</select>
	<select id="select_total_cnt" resultType="int">
	    select sum(hit) from recipe_info
	</select>
	<select id="select_food_cnt" parameterType="String" resultType="int">
	    select COUNT(*) from recipe_info where recipe_nm_ko like '%'||#{keyword}||'%'
	</select>
	<select id="getKeywordList" parameterType="java.util.Map" resultType="recipeDTO">
	    <![CDATA[
		select * from 
		    (select ROWNUM as rn, tt.* from
		        (select * from recipe_info
		        where recipe_nm_ko like '%'||#{keyword, jdbcType=VARCHAR}||'%' order by seq desc) tt)
		where rn >= #{startNum, jdbcType=NUMERIC} and rn <= #{endNum, jdbcType=NUMERIC} 
		]]>
	</select>
	<select id="getAllList" parameterType="java.util.Map" resultType="recipeDTO">
	    <![CDATA[
		select * from 
		    (select ROWNUM as rn, tt.* from
		        (select * from recipe_info order by seq desc) tt)
		where rn >= #{startNum, jdbcType=NUMERIC} and rn <= #{endNum, jdbcType=NUMERIC} 
		]]>
	</select>
	<select id="getTotalArticle" parameterType="java.lang.String" resultType="java.lang.Integer">
		select COUNT(*) as cnt from recipe_info where recipe_nm_ko like '%'||#{keyword, jdbcType=VARCHAR}||'%'
	</select>
	
	<select id="getRecipeList" parameterType="java.util.Map" resultType="recipeDTO">
		<![CDATA[
		select * from 
		    (select ROWNUM as rn, tt.* from
		        (select * from recipe_info
		        where mem_id=#{mem_id, jdbcType=VARCHAR} and recipe_nm_ko like '%'||#{keyword, jdbcType=VARCHAR}||'%' order by seq desc) tt)
		where rn >= #{startNum, jdbcType=NUMERIC} and rn <= #{endNum, jdbcType=NUMERIC} 
		]]>
	</select>
</mapper>